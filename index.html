<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSP's Meal Planner</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="A beautiful meal planning and grocery list app with recipe management">
    <meta name="theme-color" content="#F4A460">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FSP Meal Plan">
    
    <!-- Link to manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header>
            <h1>üç≥ FSP's Meal Planner</h1>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="showMealModal()">+ Add Meal</button>
                <button class="btn btn-secondary" onclick="showIngredientModal()">üì¶ Manage Ingredients</button>
                <button class="btn btn-secondary" onclick="showRecipeLibraryModal()">üìö Recipe Library</button>
                <button class="btn btn-secondary" onclick="generateGroceryList()">üõí Grocery List</button>
                <button class="btn btn-secondary" onclick="saveMealPlan()">üíæ Save Plan</button>
                <button class="btn btn-secondary" onclick="loadMealPlan()">üìÇ Load Plan</button>
                <button class="btn btn-secondary" onclick="printMealPlan()">üñ®Ô∏è Print</button>
            </div>
        </header>

        <div class="week-selector">
            <button onclick="changeWeek(-1)">‚Üê</button>
            <span id="currentWeek">Week of January 1, 2025</span>
            <button onclick="changeWeek(1)">‚Üí</button>
            <select id="planDuration" onchange="updatePlanDuration()">
                <option value="1">1 Week</option>
                <option value="2">2 Weeks</option>
            </select>
        </div>

        <div class="meal-calendar" id="mealCalendar">
            <!-- Calendar will be generated by JavaScript -->
        </div>

        <!-- Meal Modal -->
        <div id="mealModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeMealModal()">&times;</span>
                <h2>Add/Edit Meal</h2>
                <form id="mealForm">
                    <div class="form-group">
                        <label>Meal Name*</label>
                        <input type="text" id="mealName" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Meal Type*</label>
                        <select id="mealType" required>
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="dinner">Dinner</option>
                            <option value="snack">Snack</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Prep Time (minutes)</label>
                        <input type="number" id="prepTime" min="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="defaultServings">Recipe Default Serving Size</label>
                        <input type="number" id="defaultServings" min="1" value="4" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="actualServings">Actual Serving Size for This Meal</label>
                        <input type="number" id="actualServings" min="1" value="4" required onchange="checkServingSize()">
                        <small style="color: var(--warning-color); display: none;" id="servingWarning">
                            ‚ö†Ô∏è Cooking times may vary when serving size differs from recipe default
                        </small>
                    </div>

                    <div class="form-group">
                        <label>Special Instructions</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" id="needsDefrost"> Needs defrosting</label>
                            <label><input type="checkbox" id="canPrepSunday"> Can prep on Sunday</label>
                            <label><input type="checkbox" id="canPartialPrep"> Can be partially prepped</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tags (comma separated)</label>
                        <input type="text" id="mealTags" placeholder="vegan, high protein, gluten-free">
                    </div>

                    <div class="form-group">
                        <label>Recipe Instructions</label>
                        <textarea id="recipeInstructions" rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ingredients</label>
                        <div id="ingredientsList">
                            <button type="button" class="btn btn-small" onclick="addIngredientRow()">+ Add Ingredient</button>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Meal</button>
                        <button type="button" class="btn btn-secondary" onclick="closeMealModal()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Ingredient Directory Modal -->
        <div id="ingredientModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeIngredientModal()">&times;</span>
                <h2>Ingredient Directory</h2>
                <div class="ingredient-search">
                    <input type="text" id="ingredientSearch" placeholder="Search ingredients..." onkeyup="searchIngredients()">
                    <button class="btn btn-primary" onclick="showAddIngredientForm()">+ Add New Ingredient</button>
                </div>
                <div id="ingredientDirectory"></div>
                
                <div id="addIngredientForm" style="display: none;">
                    <h3>Add New Ingredient</h3>
                    <form onsubmit="addNewIngredient(event)">
                        <div class="form-group">
                            <label>Ingredient Name*</label>
                            <input type="text" id="newIngredientName" required>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="newIngredientCategory">
                                <option value="produce">Produce</option>
                                <option value="dairy">Dairy</option>
                                <option value="meat">Meat & Seafood</option>
                                <option value="pantry">Pantry</option>
                                <option value="frozen">Frozen</option>
                                <option value="bakery">Bakery</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Default Unit</label>
                            <select id="newIngredientUnit">
                                <option value="gram">Gram (g)</option>
                                <option value="kilogram">Kilogram (kg)</option>
                                <option value="milligram">Milligram (mg)</option>
                                <option value="ounce">Ounce (oz)</option>
                                <option value="pound">Pound (lb)</option>
                                <option value="milliliter">Milliliter (ml)</option>
                                <option value="liter">Liter (L)</option>
                                <option value="cup">Cup (cup)</option>
                                <option value="tablespoon">Tablespoon (tbsp)</option>
                                <option value="teaspoon">Teaspoon (tsp)</option>
                                <option value="fluid-ounce">Fluid Ounce (fl oz)</option>
                                <option value="pint">Pint (pt)</option>
                                <option value="quart">Quart (qt)</option>
                                <option value="gallon">Gallon (gal)</option>
                                <option value="piece">Piece (pc)</option>
                                <option value="dozen">Dozen (doz)</option>
                                <option value="bunch">Bunch (bunch)</option>
                                <option value="head">Head (head)</option>
                                <option value="clove">Clove (clove)</option>
                                <option value="can">Can (can)</option>
                                <option value="jar">Jar (jar)</option>
                                <option value="bottle">Bottle (bottle)</option>
                                <option value="package">Package (pkg)</option>
                                <option value="box">Box (box)</option>
                                <option value="bag">Bag (bag)</option>
                                <option value="container">Container (container)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Store Location</label>
                            <select id="newIngredientLocation">
                                <option value="">Select location...</option>
                                <option value="produce">Produce Section</option>
                                <option value="dairy">Dairy Section</option>
                                <option value="meat">Meat Department</option>
                                <option value="deli">Deli Counter</option>
                                <option value="bakery">Bakery</option>
                                <option value="frozen">Frozen Foods</option>
                                <option value="canned">Canned Goods Aisle</option>
                                <option value="pasta">Pasta & Rice Aisle</option>
                                <option value="snacks">Snacks Aisle</option>
                                <option value="beverages">Beverages</option>
                                <option value="condiments">Condiments & Sauces</option>
                                <option value="spices">Spices & Seasonings</option>
                                <option value="baking">Baking Aisle</option>
                                <option value="cereal">Cereal & Breakfast</option>
                                <option value="international">International Foods</option>
                                <option value="health">Health & Organic</option>
                                <option value="household">Household Items</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Available At (comma separated)</label>
                            <input type="text" id="newIngredientStores" placeholder="Walmart, King Soopers, Whole Foods">
                        </div>
                        <div class="form-group">
                            <label>Storage Conditions</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" id="newIngredientFrozen"> Frozen</label>
                                <label><input type="checkbox" id="newIngredientRefrigerated"> Refrigerated</label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Ingredient</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddIngredientForm()">Cancel</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Meal Details Modal -->
        <div id="mealDetailsModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeMealDetailsModal()">&times;</span>
                <div id="mealDetailsContent"></div>
            </div>
        </div>

        <!-- Grocery List Modal -->
        <div id="groceryListModal" class="modal">
            <div class="modal-content modal-wide">
                <span class="close" onclick="closeGroceryListModal()">&times;</span>
                <h2>Grocery List</h2>
                <div class="grocery-actions">
                    <button class="btn btn-primary" onclick="downloadGroceryList()">üì• Download</button>
                    <button class="btn btn-primary" onclick="printGroceryList()">üñ®Ô∏è Print</button>
                </div>
                <div id="groceryListContent"></div>
            </div>
        </div>

        <!-- Recipe Library Modal -->
        <div id="recipeLibraryModal" class="modal">
            <div class="modal-content modal-wide">
                <span class="close" onclick="closeRecipeLibraryModal()">&times;</span>
                <h2>Recipe Library</h2>
                
                <div class="recipe-search">
                    <input type="text" id="recipeSearch" placeholder="Search recipes..." onkeyup="searchRecipes()">
                    <button class="btn btn-primary" onclick="showAddRecipeForm()">+ Save Current Recipe</button>
                </div>
                
                <div id="recipeLibraryContent">
                    <!-- Recipes will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
